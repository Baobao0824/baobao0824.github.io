---
title: 前端存储技术的对比-20260x00
tags: [代码,块叠BlockStack,赛博剪报]
categories: [代码]
---

> 原链接：https://www.gfbzsblog.site/main/Articles/158

## 写在前面

这是一篇个人博客中的技术文章，他主要讲解了在前端技术中如何进行数据的存储，主要是Cookie、LocalStorage和sessionStorage，以及他们三个的特性和使用场景。这是一篇比较基础的、比较适合啃的文章，第一期块叠就找他了。

## 一、存储机制的本质差异

首先是Cookie，它出现的最早，本质上是一个键值对。由于HTTP协议是无状态的，收到HTTP请求的服务器并不知道收到的请求来自什么用户，所以就需要客户端有个标记，因此Cookie就应运而生了。一般来说第一次访问某个网站的话，http请求头中是不带Cookie字段的，但是假如服务器需要cookie的话，那它就会在返回的时候带上`Set-Cookie`字段。

```text
HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Set-Cookie: sessionid=abc123; Path=/; HttpOnly; SameSite=Lax
Set-Cookie: theme=dark; Max-Age=2592000; Path=/; Secure
```

一个Set-Cookie对应一个键值对，后续跟的是一些属性信息。同时浏览器接收到这个请求之后，就会将cookie放在自己的Cookie数据库下（各浏览器的实现不同），后续同站点下，客户端再发其二http请求的话，就会在请求头中携带相应的Cookie。

```text
GET /profile HTTP/1.1
Host: example.com
Cookie: sessionid=abc123; theme=dark
```
接下来是localStorage，它是HTML5标准中引入的Web Storage API的一部分，但是和用于服务端通信不同，它只存储于客户端，并且会一直存放在浏览器中，除非用户主动清除。

最后是sessionStorage，它也是Web Storage API的一部分，但是它并不进行持久化存储，只在当前标签页有效，一旦标签页被关闭，数据就会被清除，也使得它更适合用于存储一些非常临时的状态。

## 二、详细特征对比

### 可用容量大小

+ Cookie：一条Cookie（带属性的一个键值对）容量为4kb，每个域名有20条的容量限制。
+ localStorage：5-10MB（具体大小由浏览器决定），对于客户端就足够用了。
+ SessionStorage：同上，也是50-10MB

### 数据生命周期

Cookie：

+ 可以设置过期时间（`Expires`或`Max-Age`，现在后者优先级更高）。
+ 如果不设置过期时间，则为会话Cookie，关闭浏览器后失效。
+ 设置了过期时间的Cookie会一直存在，直到过期或被手动删除。

localStorage：

+ 数据永久存储，除非用户手动清除或通过代码删除。
+ 不会因为关闭浏览器而丢失。
+ 不会因为重启电脑而丢失。

sessionStorage：

+ 数据只在当前标签页有效。
+ 关闭标签页后数据立即清除。
+ 刷新页面不会清除数据。
+ 如果在同一个标签页内跳转或刷新，数据会保留。
+ 复制新的标签页，不会将sessionStorage带过去。